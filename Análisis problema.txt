Tras visualizar el conjunto de datos una de las primeras preguntas que nos surgió fue: ¿cuál es la estación más deficitaria y cual la menos deficitaria?, entendiendo estación más deficitaria como aquella de la que parten más bicis de las que llegan y menos deficitaria lo contrario. Este es un problema relevante desde ambos puntos de vista, dado que una estación que sea muy deficitaria podrá tener rápidamente falta de suministro de bicis, y una que no lo sea acabará teniendo más bicicletas de las que la estación puede hacerse cargo. Encontrar estas estaciones ha sido nuestro primer objetivo.

Para implementar la solución a este problema hemos abierto la base de datos de trasvase de bicicletas 'sample_10e4.json' y nos hemos quedado únicamente con la informmación de "idplug" e "idunplug". Esta es la información correspondiente a la estación a la que ha llegado y de la que ha salido la bicicleta, respectivamente. A continuación, usando estos datos hemos contado, por cada estación, la cantidad de bicis que entran y la cantidad de salen, sumando 1 cuando entran y restando 1 cuando salen y guardando toda esta información en un diccionario. De esta manera, la estación más deficitaria será aquella que tenga un valor menor en el diccionario (negativo casi seguro) y la menos aquella con un valor mayor. Tras analizar la base nos hemos encontrado que la más deficitaria es la 108, con un valor de -25 y la menos deficitaria la 135, con un valor de 35.

Una vez hemos obtenido estos resultados la siguiente pregunta que nos hemos hecho es: ¿existe algún tipo de relación entre estas dos estaciones? Conocer esto puede ser interesante dado que, si se demuestra que sí, podriamos relacionar los dos problemas y tomar medidas conjuntas. Sin embargo la forma de encontrar una respuesta para esto no es tan fácil. Como solo tenemos la información de los trayectos de una estación a otra, no podemos ver a una escala más "global" si hay un trasvase de bicis de una otra que no sea solamente directo (imaginemos por ejemplo, un caso de un trabajador que siempre sale de la 108 y va a la estación 23 y otro que siempre va de la 23 a la 135. Sumando estas dos, podríamos hablar de un "trasvase" de bici que se realiza siempre de la 108 a la 135, pero no se ve si solamente analizamos los trayectos directos entre estas dos estaciones).

Para analizar esta pregunta, hemos decidido entonces aprovechar el sistema de grafos que tiene la base de datos. Decidiremos que hay un trasvase de bicis entre dos estaciones si hay un camino directo entre esas dos estaciones, o si hay un camino de longitud 2 entre esas dos estaciones (pasando solo por una estación más entre medias). Para ver esto, hemos usado dos diccionarios para reunir las estaciones a las que llegan bicis que salen desde 108 (con su cantidad) y las estaciones de las que salen bicis que llegan a 135 (también con su cantidad). A continuación, hemos revisado la intersección de estaciones de estos dos diccionarios, quedándonos con el menor número de bicis que hay en los dos diccionarios. Estas serán las bicis que se han "transferido" de la 108 a la 135. A pesar de que no hay ningún trasvase directo, pordemos observar que sí que hay una gran cantidad de bicis en la intersección de los dos diccionarios, 39 en total, con lo que consideramos que sí que se puede hablar de que hay cierta relación entre las bicis que salen de 108 y las que llegan a 135.

Otra pregunta distinta que nos hemos querido hacer es: ¿cuáles son las estaciones en las que circulan más tiempo las bicicletas? Conocer esto puede ser relevante a la hora de decidir en qué estaciones van a necesitar un mayor mantenimiento las bicicletas por tener un mayor uso y en cuales menos. Para responder esta pregunta hemos filtrado la base de datos original para quedarnos con la información de "idunplug" (dado que tomaremos como base la estación de salida del viaje) y "travel_time". A continuación, pasamos a sumar por cada estación los distintos tiempos de trayecto y observamos cuáles son los mayores y cuales los menores.

Después hemos realizado el mismo análisis, pero para el tiempo medio de circulación. Este también es relevante, debido a que las estaciones en las que haya bicis que circulan más tiempo en total no tienen por qué ser aquellas en las que las propias bicis recorran realmente más distancia (un ejemplo sería una estación en la que salen 3 bicis que circulan durante 5 minutos frente a otra en la que solo sale una pero circula 10 minutos. En la segunda, la bici tiene un mayor tiempo de recorrido que las de la primera por separado y por tanto un "desgaste" mayor). Usando los datos reunidos de la pregunta anterior, para hallar los tiempo medios tomamos también la cantidad de bicis que sale de cada estación y la usamos para dividir el tiempo total de circulación. Como habíamos supuesto, obtenemos que las estaciones que tienen mayor tiempo de recorrido medio son en su mayoría distintas a las que obtuvimos en el caso de los tiempos totales.

Finalmente nos hemos hecho una última pregunta. En la base de datos, además de la información relacionada con el trayecto, podemos encontrar información del usuario que ha realizado el viaje. Entre esta información podemos encontrar el código postal de la persona que recoge la bici. Sabiendo esto podemos preguntarnos: ¿cuántas de las personas que han hecho uso del servicio de bicimad pertenecen realmente al centro de Madrid y cuántas son de fuera? Esta información puede ser relevante a la hora de querer enfocar a lo mejor la apertura de nuevos puestos de bicis a lugares más en el extraradio de la ciudad o más céntricos, por ejemplo.

Para responder a esta pregunta vamos a quedarnos con los datos de 'idunplug' y de 'zip_code' de la base de datos original. Agrupamos pimero los datos en función del código postal. A continuación sumamos el número de usuarios en función de los que son de fuera o de dentro de Madrid. Como los códigos postales de Madrid empiezan todos por 280XX, tomamos simplemente todos los que tienen esa forma como usuarios de Madrid y el resto como usuarios de fuera (obviando los casos en los que no hay código postal). Tras esto, obtenemos los resultados: hay 6288 usuarios de Madrid frente a 279 usuarios de fuera de la capital. Este es un dato bastante esperado, hay más usuarios de la propia ciudad que de fuera de ella, pero también hay un número relevante de gente que no vive en ella, que pueden ser desde turistas nacionales hasta gente que vive en ciudades dormitorio y deja el coche en la periferia para llegar en bici al trabajo.



